import { test, expect } from '@jest/globals'
import JTester from '@src/JTester'

const JTesterFactory = { ...JTester.prototype }

jest.mock('@src/JTester', JTesterFactory)

let jtester: JTester

// beforeEach(() => {
//   console.log = jest.fn((msg) => msg)
// })
// afterEach(() => {
//   jtester = undefined
// })

describe('JTester', () => {
  test('config: default', () => {
    jtester = new JTester({ autorun: true, verbose: false })
    jtester.test(() => { const foo = 'bar' })
    // const spyRun = jest.spyOn(jtester, 'run').mockImplementationOnce(() => jtester.run())
    expect(jtester.run).toHaveBeenCalled()
  })
})